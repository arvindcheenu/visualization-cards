<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViBBS – Visualization Building Blocks and Scenarios</title>
    <!-- PWA Meta Tags -->
    <meta name="description" content="Explore and organize different visualization techniques and design patterns with interactive cards">
    <meta name="theme-color" content="#1f2937">
    <meta name="background-color" content="#ffffff">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="Icon-256.png" type="image/png">
    <link rel="shortcut icon" href="Icon-256.png" type="image/png">
    <link rel="mask-icon" href="Icon-256.png" color="#1f2937">
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="Icon-256.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ViBBS – Visualization Building Blocks and Scenarios">
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileImage" content="Icon-256.png">
    <meta name="msapplication-TileColor" content="#1f2937">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Medium Zoom for lightbox functionality -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js"></script>
</head>
<body class="font-sans bg-white dark:bg-gray-900 text-black dark:text-white overflow-hidden transition-colors duration-300">
    <!-- PWA Install Banner -->
    <div id="installBanner" class="fixed bottom-0 left-0 right-0 bg-blue-600 text-white p-3 flex items-center justify-between z-50 transform translate-y-full transition-transform duration-300">
        <div class="flex items-center gap-3">
            <i class="fas fa-download"></i>
            <span class="text-sm font-medium">Install ViBBS – Visualization Building Blocks and Scenarios for offline access</span>
        </div>
        <div class="flex gap-2">
            <button id="installButton" class="bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition-colors">
                Install
            </button>
            <button id="dismissInstall" class="text-white hover:text-gray-200 transition-colors">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    <!-- Header -->
    <div class="text-center border-b border-gray-300 dark:border-gray-600">
        <div class="flex items-center justify-between pl-4 pr-4 py-3 bg-gray-50 dark:bg-gray-800">
            <div class="flex items-center gap-3">
                <img src="Icon-256.png" alt="ViBBS Logo" class="w-10 h-10">
                <div class="flex flex-col text-left gap-0">
                    <h1 class="text-xl font-semibold">ViBBS</h1>
                    <h4 class="text-sm text-gray-600 dark:text-gray-400">Visualization Building Blocks and Scenarios</h4>
                </div>
            </div>
            <div class="flex gap-2">
                <!-- Desktop Segmented Control -->
                <div class="hidden md:flex justify-center bg-gray-50 dark:bg-gray-800">
                    <div class="bg-gray-200 dark:bg-gray-700 p-1 mr-1 rounded-lg flex">
                        <button class="flex inline gap-2 px-4 py-1 rounded-md text-sm font-medium transition-all duration-200 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200" 
                                onclick="navigateToCards()">
                            <svg class="size-[18px] fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.--><path d="M51.8 160.4c-3.7 2.1-4.9 6.8-2.8 10.5l167 289.3c2.1 3.7 6.8 4.9 10.5 2.8L419.4 351.6c3.7-2.1 4.9-6.8 2.8-10.5L255.2 51.8c-2.1-3.7-6.8-4.9-10.5-2.8L51.8 160.4zM7.5 194.9c-15.4-26.6-6.3-60.7 20.4-76.1L220.7 7.5c26.6-15.4 60.7-6.3 76.1 20.4l167 289.3c15.4 26.6 6.2 60.7-20.4 76.1L250.5 504.5c-26.6 15.4-60.7 6.2-76.1-20.4L7.5 194.9zm451.9 226c41.9-24.2 56.3-77.8 32.1-119.8L354.7 64.2c1.7-.2 3.5-.2 5.3-.2l224 0c30.9 0 56 25.1 56 56l0 336c0 30.9-25.1 56-56 56l-224 0c-13.7 0-26.2-4.9-35.9-13l135.3-78.1z"/></svg>Cards
                        </button>
                        <button class="flex inline gap-2 px-4 py-1 rounded-md text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm">
                                <svg class="size-[18px] fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.--><path d="M374.8 80.3C355.9 33.2 309.8 0 256 0s-99.9 33.2-118.8 80.3c-3-.2-6.1-.3-9.2-.3C57.3 80 0 137.3 0 208s57.3 128 128 128c14.4 0 28.3-2.4 41.3-6.8C184.7 361.6 217.7 384 256 384s71.3-22.4 86.7-54.8c12.9 4.4 26.8 6.8 41.3 6.8c70.7 0 128-57.3 128-128s-57.3-128-128-128c-3.1 0-6.1 .1-9.2 .3zM144 480a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM32 512a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>Scenarios
                        </button>
                    </div>
                </div>
                <!-- PWA Status Indicator -->
                <div id="pwaStatus" class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200" title="PWA Status">
                    <i class="fas fa-wifi text-sm" id="statusIcon"></i>
                </div>
                <button class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200" 
                        onclick="toggleDarkMode()" id="darkModeToggle">
                    <i class="fas fa-moon text-sm" id="darkModeIcon"></i>
                </button>
                <button class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200" 
                        onclick="openInfoModal()">
                    <i class="fas fa-info text-sm"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- Main Container -->
    <div class="h-screen flex flex-col">
        <div class="flex-1 overflow-y-scroll mt-16 md:mt-0">
            <div class="h-full p-6">
                <!-- Scenarios Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto last:pb-40">
                    <script>
                        Array.from({length: 10}).forEach((scenario, index) => {
                            document.write(`
                                <div class="scenario-item bg-white dark:bg-gray-800 rounded-md shadow-lg overflow-hidden transition-all duration-200 hover:shadow-xl hover:scale-105">
                                    <img src="scenarios/scenario-${index+1}.png" alt="Scenario ${index}" class="w-full aspect:10/16 border border-4 rounded-md border-teal-600 object-cover cursor-pointer" data-zoom-src="scenarios/scenario-${index+1}.png">
                                </div>
                            `);
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Info Modal -->
    <div class="fixed inset-0 bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70 z-50 flex items-center justify-center hidden" id="infoModal" onclick="closeInfoModal()">
        <div class="bg-white dark:bg-gray-800 rounded-lg max-w-2xl max-h-[80vh] overflow-y-auto m-4 shadow-xl" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center border-b border-gray-200 dark:border-gray-600 p-6 py-3 bg-gray-50 dark:bg-gray-700">
                <h2 class="text-xl font-semibold">About ViBBS – Visualization Building Blocks and Scenarios</h2>
                <button class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 w-8 h-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center" 
                        onclick="closeInfoModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                    The <b>ViBBS – Visualization Building Blocks and Scenarios</b> tool helps you explore and organize different visualization techniques and design patterns. 
                    Each card represents a specific approach or method that can be applied to data visualization projects.
                    Cards courtesy of <a href="https://www.igd.fraunhofer.de/de/institut/mitarbeitende/thorsten-may.html" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank">Thorsten May</a> from Fraunhofer IGD, <a href="https://lcibulski.github.io/" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank">Lena Cibulski</a> from the University of Rostock, <a href="https://www.au.dk/en/petermus@au.dk" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank">Peter Musaeus</a> and <a href="https://cs.au.dk/~hjschulz/" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank">Hans-Jörg Schulz</a> from Aarhus University. Developed by <a href="https://arvindchee.nu/" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank">Arvind Srinivasan</a> as a personal project to make these digital.
                </p>
                <div class="space-y-3">
                    <h3 class="font-semibold text-lg">Card Categories</h3>
                    <div class="space-y-3">
                        <div class="flex items-start gap-3">
                            <div class="w-4 h-4 bg-sky-600 rounded-sm mt-1 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-medium">Visualization</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Specific chart types and visualization formats including bar charts, scatterplots, treemaps, and network diagrams.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-4 h-4 bg-blue-600 rounded-sm mt-1 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-medium">Mapping</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Visual encoding methods that map data to visual properties like color, size, shape, and position.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-4 h-4 bg-purple-600 rounded-sm mt-1 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-medium">Layout</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Spatial arrangement and composition techniques including small multiples, nesting, and juxtaposition patterns.</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-4 h-4 bg-green-600 rounded-sm mt-1 flex-shrink-0"></div>
                            <div>
                                <h4 class="font-medium">Interaction</h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Interactive techniques like brushing, filtering, zooming, and tooltips that allow users to explore data dynamically.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="space-y-3">
                    <h3 class="font-semibold text-lg">How to Use</h3>
                    <ul class="space-y-2 text-sm text-gray-700 dark:text-gray-300">
                        <li class="flex items-start gap-2">
                            <i class="fas fa-thumbtack text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Pin cards</strong> by clicking on them or using the pin button to save them to your collection</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-eye-slash text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Hide pinned cards</strong> in each category to focus on unpinned options</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-filter text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Filter pinned cards</strong> by category in the bottom drawer</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-chevron-up text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Open the drawer</strong> at the bottom to view and manage your pinned cards</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-moon text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Toggle dark mode</strong> using the moon/sun button in the header</span>
                        </li>
                        <li class="flex items-start gap-2">
                            <i class="fas fa-download text-xs mt-1 text-gray-500 dark:text-gray-400"></i>
                            <span><strong>Install as PWA</strong> for offline access and app-like experience</span>
                        </li>
                    </ul>
                </div>
                <div class="bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4">
                    <p class="text-sm text-blue-800 dark:text-blue-200">
                        <i class="fas fa-lightbulb mr-2"></i>
                        <strong>Tip:</strong> Use this tool during the design process to explore different visualization approaches and build a collection of techniques relevant to your project.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Mobile Top Segmented Control -->
    <div class="md:hidden fixed top-[70px] w-full pl-4 pr-2 flex justify-center bg-gray-50 dark:bg-gray-800 shadow-md">
        <div class="bg-gray-200 dark:bg-gray-700 p-1 mr-1 rounded-lg flex mb-3 flex-1">
            <button class="flex-1 gap-2 px-4 py-1 rounded-md text-sm font-medium transition-all duration-200 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200" 
                    onclick="navigateToCards()">
                <div class="flex flex-col items-center"><svg class="size-[18px] fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--!Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.--><path d="M51.8 160.4c-3.7 2.1-4.9 6.8-2.8 10.5l167 289.3c2.1 3.7 6.8 4.9 10.5 2.8L419.4 351.6c3.7-2.1 4.9-6.8 2.8-10.5L255.2 51.8c-2.1-3.7-6.8-4.9-10.5-2.8L51.8 160.4zM7.5 194.9c-15.4-26.6-6.3-60.7 20.4-76.1L220.7 7.5c26.6-15.4 60.7-6.3 76.1 20.4l167 289.3c15.4 26.6 6.2 60.7-20.4 76.1L250.5 504.5c-26.6 15.4-60.7 6.2-76.1-20.4L7.5 194.9zm451.9 226c41.9-24.2 56.3-77.8 32.1-119.8L354.7 64.2c1.7-.2 3.5-.2 5.3-.2l224 0c30.9 0 56 25.1 56 56l0 336c0 30.9-25.1 56-56 56l-224 0c-13.7 0-26.2-4.9-35.9-13l135.3-78.1z"/></svg>Cards</div>
            </button>
            <button class="flex-1 gap-2 px-4 py-1 rounded-md text-sm font-medium transition-all duration-200 bg-white dark:bg-gray-600 text-blue-600 dark:text-blue-400 shadow-sm">
                    <div class="flex flex-col items-center"><svg class="size-[18px] fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Pro 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.--><path d="M374.8 80.3C355.9 33.2 309.8 0 256 0s-99.9 33.2-118.8 80.3c-3-.2-6.1-.3-9.2-.3C57.3 80 0 137.3 0 208s57.3 128 128 128c14.4 0 28.3-2.4 41.3-6.8C184.7 361.6 217.7 384 256 384s71.3-22.4 86.7-54.8c12.9 4.4 26.8 6.8 41.3 6.8c70.7 0 128-57.3 128-128s-57.3-128-128-128c-3.1 0-6.1 .1-9.2 .3zM144 480a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM32 512a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"/></svg>Scenarios</div>
            </button>
        </div>
    </div>
    
    <script>
        // PWA variables
        let deferredPrompt;
        let isInstalled = false;
        // Dark mode state
        let darkMode = false;
        
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then((registration) => {
                        console.log('ServiceWorker registration successful');
                        updatePWAStatus('online');
                    })
                    .catch((err) => {
                        console.log('ServiceWorker registration failed: ', err);
                        updatePWAStatus('offline');
                    });
            });
        }
        
        // PWA Install Handler
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallBanner();
        });
        
        // Check if app is installed
        window.addEventListener('appinstalled', () => {
            isInstalled = true;
            hideInstallBanner();
            updatePWAStatus('installed');
        });
        
        // Show install banner
        function showInstallBanner() {
            if (!isInstalled) {
                const banner = document.getElementById('installBanner');
                banner.style.transform = 'translateY(0)';
            }
        }
        
        // Hide install banner
        function hideInstallBanner() {
            const banner = document.getElementById('installBanner');
            banner.style.transform = 'translateY(100%)';
        }
        
        // Install button handler
        document.getElementById('installButton').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    hideInstallBanner();
                }
                deferredPrompt = null;
            }
        });
        
        // Dismiss install banner
        document.getElementById('dismissInstall').addEventListener('click', () => {
            hideInstallBanner();
        });
        
        // Update PWA status indicator
        function updatePWAStatus(status) {
            const statusIcon = document.getElementById('statusIcon');
            const pwaStatus = document.getElementById('pwaStatus');
            switch(status) {
                case 'online':
                    statusIcon.className = 'fas fa-wifi text-sm';
                    pwaStatus.title = 'Online';
                    pwaStatus.className = 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200';
                    break;
                case 'offline':
                    statusIcon.className = 'fas fa-wifi-slash text-sm';
                    pwaStatus.title = 'Offline';
                    pwaStatus.className = 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200';
                    break;
                case 'installed':
                    statusIcon.className = 'fas fa-mobile-alt text-sm';
                    pwaStatus.title = 'Installed PWA';
                    pwaStatus.className = 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200';
                    break;
            }
        }
        
        // Monitor online/offline status
        window.addEventListener('online', () => updatePWAStatus('online'));
        window.addEventListener('offline', () => updatePWAStatus('offline'));
        
        // Initialize dark mode based on system preference
        function initDarkMode() {
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const savedDarkMode = localStorage.getItem('darkMode');
            darkMode = savedDarkMode ? JSON.parse(savedDarkMode) : systemPrefersDark;
            applyDarkMode();
        }
        
        // Apply dark mode
        function applyDarkMode() {
            const html = document.documentElement;
            const icon = document.getElementById('darkModeIcon');
            if (darkMode) {
                html.classList.add('dark');
                icon.className = 'fas fa-sun text-sm';
            } else {
                html.classList.remove('dark');
                icon.className = 'fas fa-moon text-sm';
            }
            localStorage.setItem('darkMode', JSON.stringify(darkMode));
        }
        
        // Toggle dark mode
        function toggleDarkMode() {
            darkMode = !darkMode;
            applyDarkMode();
        }
        
        // Navigation functions
        function navigateToCards() {
            window.location.href = 'index.html';
        }
        
        function navigateToScenarios() {
            // Already on scenarios page
        }
        
        // Open info modal
        function openInfoModal() {
            document.getElementById('infoModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }
        
        // Close info modal
        function closeInfoModal() {
            document.getElementById('infoModal').classList.add('hidden');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }
        
        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeInfoModal();
            }
        });
        
        // Listen for system dark mode changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            // Only auto-update if user hasn't manually set a preference
            if (!localStorage.getItem('darkMode')) {
                darkMode = e.matches;
                applyDarkMode();
            }
        });
        
        // Initialize Medium Zoom for lightbox functionality
        function initMediumZoom() {
            const images = document.querySelectorAll('img[data-zoom-src]');
            mediumZoom(images, {
                background: 'rgba(0, 0, 0, 0.8)',
                margin: 40,
                scrollOffset: 40,
                container: document.body,
                template: null
            });
        }
        
        // Initialize the application
        function init() {
            initDarkMode();
            initMediumZoom();
            
            // Check if running as PWA
            if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
                isInstalled = true;
                updatePWAStatus('installed');
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>